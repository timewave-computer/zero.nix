<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Zero.nix Docs</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Zero.nix Docs</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/timewave-computer/zero.nix" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p><a href="https://github.com/timewave-computer/zero.nix">Zero.nix</a> is a collection of nix based tools
for building, testing, and deploying interchain programs</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="guides"><a class="header" href="#guides">Guides</a></h1>
<ul>
<li><a href="guides/./build-valence-contracts.html">Build Valence Contracts</a></li>
<li><a href="guides/./upload-contracts.html">Upload Contracts</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="build-valence-contracts"><a class="header" href="#build-valence-contracts">Build Valence Contracts</a></h1>
<p>Zero.nix contains a flake module <a href="guides/../reference/flake-modules/valence-contracts.html"><code>valence-contracts</code></a>
that exports packages for valence contracts.
Zero.nix uses this module to export packages for all releases and the main branch of valence-protocol contracts.</p>
<h2 id="example"><a class="header" href="#example">Example</a></h2>
<p>Here is an example of a flake that creates a package for valence-protocol contracts from the latest main revision.</p>
<pre><code class="language-nix">{
  nixConfig = {
    extra-substituters = "https://timewave.cachix.org";
    extra-trusted-public-keys = ''
      timewave.cachix.org-1:nu3Uqsm3sikI9xFK3Mt4AD4Q6z+j6eS9+kND1vtznq4=
    '';
  };

  description = "Package for valence-protocol contracts.";

  outputs = inputs @ {flake-parts, ...}:
    flake-parts.lib.mkFlake {inherit inputs;} {
      systems = [
        "x86_64-linux"
      ];
      perSystem = { system, ... }: {
        valence-contracts.builds = {
          main = {
            version = "main";
            src = inputs.valence-contracts-main;
          };
        }
      };
    };

  inputs = {
    nixpkgs.url = "github:nixos/nixpkgs";
    flake-parts.url = "github:hercules-ci/flake-parts";
    zero-nix.url = "github:timewave-computer/zero.nix";
    valence-contracts-main.url = "github:timewave-computer/valence-protocol";
    valence-contracts-main.flake = false;
  };
}
</code></pre>
<p>The resulting package can then be built</p>
<h2 id="adding-versions-to-zeronix"><a class="header" href="#adding-versions-to-zeronix">Adding versions to zero.nix</a></h2>
<p>Supposing that valence-protocol version X.Y.Z was just released,
the package for that version's contracts would have to be added
to this repository.</p>
<p>First add the add the input for the tag to the flake.nix, by
addling these two lines inside the <code>inputs</code> section.</p>
<pre><code class="language-nix">  inputs = {
    valence-contracts-vX_Y_Z.url = "github:timewave-computer/valence-protocol/vX.Y.Z";  
    valence-contracts-vX_Y_Z.flake = false;
  };
</code></pre>
<p>The <code>valence-contracts</code> package file will automatically export
contract packages for all inputs starting with
"valence-contracts", so the package can immediately be built
once the input is added with the following command:</p>
<pre><code class="language-bash">nix build .#valence-contracts-vX_Y_Z
</code></pre>
<p>This command can take up to 30 min depending on the machine its run in.</p>
<p>To then make use of the package, be sure to update the zero.nix
input of any flake depending on zero.nix
If the input is called <code>zero-nix</code> in the flake then run:</p>
<pre><code class="language-bash">nix flake update zero-nix
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="upload-contracts"><a class="header" href="#upload-contracts">Upload Contracts</a></h1>
<p>Zero.nix provides the flake module
<a href="guides/../reference/flake-modules/valence-contracts.html"><code>upload-contracts</code></a>
to automate the process of uploading contracts to cosmos based
chains.</p>
<h2 id="example-1"><a class="header" href="#example-1">Example</a></h2>
<p>Here is an example of a flake.nix that exports scripts to upload
valence_processor and valence_base_account contracts to neutron and juno.</p>
<pre><code class="language-nix">{
  nixConfig = {
    extra-substituters = "https://timewave.cachix.org";
    extra-trusted-public-keys = ''
      timewave.cachix.org-1:nu3Uqsm3sikI9xFK3Mt4AD4Q6z+j6eS9+kND1vtznq4=
    '';
  };

  description = "Uploading valence_authorization contract to neutron and juno";

  outputs = inputs @ {flake-parts, ...}:
    flake-parts.lib.mkFlake {inherit inputs;} {
      systems = [
        "x86_64-linux"
      ];
      perSystem = { lib, inputs', ... }: {
        upload-contracts = {
          networks.mainnet = {
            chainDefaults = { name, ... }: {
              contracts = {
                valence_authorization.package = inputs'.zero-nix.packages.valence-contracts-main;
                valence_base_account.package = inputs'.zero-nix.packages.valence-contracts-main;
              };
              chain-id = lib.mkDefault "${name}-1";
              max-fees = "1000000";
            };
            chains = {
              neutron = {
                chain-id = "neutron-1";
                node-address = "https://rpc-voidara.neutron-1.neutron.org";
                denom = "untrn";
              };
              juno = {
                chain-id = "juno-1";
                node-address = "https://juno-rpc.polkachu.com:443";
                denom = "ujuno";
              };
            };
          };
        };
      };
    };

  inputs = {
    nixpkgs.url = "github:nixos/nixpkgs";
    flake-parts.url = "github:hercules-ci/flake-parts";
    zero-nix.url = "github:timewave-computer/zero.nix";
  };
}
</code></pre>
<p>To then make use of the scripts use <code>nix run</code>.
Code IDs will be printed out in toml format.</p>
<h3 id="upload-contracts-to-an-individual-chain"><a class="header" href="#upload-contracts-to-an-individual-chain">Upload contracts to an individual chain</a></h3>
<p>Run <code>nix run .#&lt;network&gt;-&lt;chain&gt;-upload-contracts</code>.</p>
<p>For example, to upload neutron mainnet contracts run the following:</p>
<pre><code class="language-bash">nix run .#mainnet-neutron-upload-contracts -- --admin-address &lt;admin-address&gt;
</code></pre>
<p>Code ids will be printed out at the end in toml format.</p>
<h3 id="upload-contracts-to-a-network-of-chains"><a class="header" href="#upload-contracts-to-a-network-of-chains">Upload contracts to a network of chains</a></h3>
<p>To upload all contracts for every chain in a network use:</p>
<pre><code class="language-bash">nix run .#mainnet-upload-contracts -- --admin-address &lt;admin-key-name&gt;
</code></pre>
<p>This script will create a <code>contracts.toml</code> for the whole network in <code>mainnet-contracts/contracts.toml</code>.</p>
<p>The uploading process doesn't yet support command line arguments per chain, so when uploading a network of chains it is recommended to have addresses with the same key name for all chains and then pass the key name as the admin address.</p>
<p>If it is necessary to specify different admin addresses per chain, then it must be set in flake.nix with the <code>admin-address</code> key. To override the mainnet neutron admin-address, for example, go to the "networks.mainnet.chains" section of flake.nix and set admin-address like so:</p>
<pre><code class="language-nix">networks.mainnet.chains = {
  neutron = {
    admin-address = "neutron1...";
</code></pre>
<h3 id="customizing-contract-uploads"><a class="header" href="#customizing-contract-uploads">Customizing contract uploads</a></h3>
<p>The contract uploading script can be passed various arguments similar to how the admin address was passed above. To see all the arguments of the script run:</p>
<pre><code class="language-bash">nix run github:timewave-computer/zero.nix#upload-contract -- --help
</code></pre>
<p>Note: all options have to be passed after the "--" to ensure they get passed to the script instead of the nix command.</p>
<p>Every option has an equivalent environment variable as described in the help menu. These variables can optionally be set in flake.nix for declarative configuration. Options passed in the command line will always override settings in environment variables (or set through nix).</p>
<p>As an example, to upload neutron contracts with a different rpc, run:</p>
<pre><code class="language-bash">nix run .#mainnet-neutron-upload-contracts --admin-address &lt;admin-address&gt; --node-address &lt;rpc url&gt;
</code></pre>
<h3 id="manually-print-code-ids"><a class="header" href="#manually-print-code-ids">Manually print code ids</a></h3>
<p>A script is available to print the code ids of any collection of chains. To do so, run:</p>
<pre><code class="language-bash">nix run .#print-contracts-toml &lt;chain yaml files&gt;
</code></pre>
<p>The chain yaml files are the ones living in the contracts-data folder created by the upload scripts.</p>
<p>For example, to print the contracts.toml for contracts on just neutron and juno on mainnet, run:</p>
<pre><code class="language-bash">nix run .#print-contracts-toml mainnet/contracts-data/neutron.yaml mainnet/contracts-data/juno.yaml 
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flake-modules-reference"><a class="header" href="#flake-modules-reference">Flake Modules Reference</a></h1>
<ul>
<li><a href="reference/flake-modules/./upload-contracts.html">Upload Contracts Options</a></li>
<li><a href="reference/flake-modules/./upload-valence-contracts.html">Upload Valence Contracts Options</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="upload-contracts-1"><a class="header" href="#upload-contracts-1">Upload Contracts</a></h1>
<p><a href="https://github.com/timewave-computer/zero.nix/blob/main/flakeModules/upload-contracts/default.nix"><code>upload-contracts</code></a>
is a flake-parts module that creates runnables that will upload cosmwasm contracts to networks of chains.</p>
<h1 id=""><a class="header" href="#"></a></h1>
<h2 id="installation"><a class="header" href="#installation">Installation</a></h2>
<p>To use these options, add to your flake inputs:</p>
<pre><code class="language-nix">upload-contracts.url = "github:timewave-computer/zero.nix";
</code></pre>
<p>and inside the <code>mkFlake</code>:</p>
<pre><code class="language-nix">imports = [
  inputs.upload-contracts.flakeModules.upload-contracts
];
</code></pre>
<p>Run <code>nix flake lock</code> and you're set.</p>
<h2 id="options"><a class="header" href="#options">Options</a></h2>
<h2 id="opt-perSystem.upload-contracts.network-defaults"><a class="header" href="#opt-perSystem.upload-contracts.network-defaults">perSystem.upload-contracts.network-defaults</a></h2>
<p>Default settings to merge into all networks.
Options are the same as the ones for each network.
Since this is a module it can dynamically reference network specific names and configuration as seen in the example.</p>
<p><em>Type:</em>
module</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Example:</em></p>
<pre><code>{ name, ... }: {
  data-dir = "./${name}/contracts-data";
}

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks"><a class="header" href="#opt-perSystem.upload-contracts.networks">perSystem.upload-contracts.networks</a></h2>
<p>Networks to upload contracts to.</p>
<p><em>Type:</em>
attribute set of (submodule)</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chain-defaults"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chain-defaults">perSystem.upload-contracts.networks.&lt;name&gt;.chain-defaults</a></h2>
<p>Default settings for all chains.</p>
<p><em>Type:</em>
module</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains">perSystem.upload-contracts.networks.&lt;name&gt;.chains</a></h2>
<p>Chains to upload contracts to.</p>
<p><em>Type:</em>
attribute set of (submodule)</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.package"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.package">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.package</a></h2>
<p>Package with node command for chain.</p>
<p><em>Type:</em>
package</p>
<p><em>Default:</em></p>
<pre><code>cosmos-nix.packages.${name}

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.admin-address"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.admin-address">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.admin-address</a></h2>
<p>Admin address to use for contracts;</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>""</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.chain-id"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.chain-id">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.chain-id</a></h2>
<p>Unique chain ID.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>""</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.command"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.command">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.command</a></h2>
<p>Chain command to use for all operations.</p>
<p><em>Type:</em>
absolute path</p>
<p><em>Default:</em></p>
<pre><code>"${package}/bin/${package.meta.mainProgram}"

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contract-defaults"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contract-defaults">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contract-defaults</a></h2>
<p>Default settings to merge into all contracts.</p>
<p><em>Type:</em>
module</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contracts</a></h2>
<p>Contracts to upload to this chain.</p>
<p><em>Type:</em>
attribute set of (submodule)</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.package"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.package">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contracts.&lt;name&gt;.package</a></h2>
<p>Package where contract is stored.
Only used to automatically set <code>path</code> and <code>source</code> options.</p>
<p><em>Type:</em>
package</p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.initial-state"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.initial-state">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contracts.&lt;name&gt;.initial-state</a></h2>
<p>Initial state to pass to contract when instantiating.
Only used if <code>instantiat</code> is also set.</p>
<p><em>Type:</em>
JSON value</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.instantiate"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.instantiate">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contracts.&lt;name&gt;.instantiate</a></h2>
<p>Whether or not to instantiate contract.</p>
<p><em>Type:</em>
boolean</p>
<p><em>Default:</em>
<code>false</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.path"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.path">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contracts.&lt;name&gt;.path</a></h2>
<p>Location of contract.</p>
<p><em>Type:</em>
absolute path</p>
<p><em>Default:</em></p>
<pre><code>"${package}/${name}.wasm"

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.source"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.contracts._name_.source">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.contracts.&lt;name&gt;.source</a></h2>
<p>Text to indicate where contract is sourced from. Could be a git revision, url, or local path.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em></p>
<pre><code>`package.src.rev` if it exists, otherwise absolute path of contract

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.data-file"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.data-file">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.data-file</a></h2>
<p>File where data about uploaded contracts will be stored.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em></p>
<pre><code>"${data-dir}/${name}.yaml"

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.denom"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.denom">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.denom</a></h2>
<p>Denom to use when submitting transactions on chain.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>""</code></p>
<p><em>Example:</em>
<code>"uatom"</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.from-address"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.from-address">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.from-address</a></h2>
<p>The account that transactions should be sent from.
The private key for this account will need to be available in the
keyring specified in the <code>keyring</code> option.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>admin-address</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.gas-multiplier"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.gas-multiplier">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.gas-multiplier</a></h2>
<p>This number will be multiplied to the estimated gas computed for any transaction.</p>
<p><em>Type:</em>
floating point number</p>
<p><em>Default:</em>
<code>1.5</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.keyring-backend"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.keyring-backend">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.keyring-backend</a></h2>
<p>Keyring backend to use.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>"test"</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.max-fees"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.max-fees">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.max-fees</a></h2>
<p>Maximum fees allowed for any transaction.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>""</code></p>
<p><em>Example:</em>
<code>"1000000"</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.chains._name_.node-address"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.chains._name_.node-address">perSystem.upload-contracts.networks.&lt;name&gt;.chains.&lt;name&gt;.node-address</a></h2>
<p>RPC address of node to use for all chain operations.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>""</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.data-dir"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.data-dir">perSystem.upload-contracts.networks.&lt;name&gt;.data-dir</a></h2>
<p>Folder where data about uploaded contracts should be stored.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em></p>
<pre><code>"${name}-contracts";

</code></pre>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<h2 id="opt-perSystem.upload-contracts.networks._name_.program-manager-chains-toml"><a class="header" href="#opt-perSystem.upload-contracts.networks._name_.program-manager-chains-toml">perSystem.upload-contracts.networks.&lt;name&gt;.program-manager-chains-toml</a></h2>
<p>Chains.toml file in format used for valence program manager
to pull default chain information from.</p>
<p><em>Type:</em>
null or absolute path</p>
<p><em>Default:</em>
<code>null</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main/default.nix">upload-contracts/default.nix</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="valence-contracts"><a class="header" href="#valence-contracts">Valence Contracts</a></h1>
<p><a href="https://github.com/timewave-computer/zero.nix/blob/main/flakeModules/valence-contracts.nix"><code>valence-contracts</code></a>
is a flake-parts module that sets up all valence contracts to be uploaded for the latest release to be consumed by the <a href="reference/flake-modules/./upload-contracts.html"><code>upload-contracts</code></a> module. It can also create packages for any number of
<a href="https://github.com/timewave-computer/valence-protocol">valence-protocol</a>
versions with the <code>builds</code> option. This feature is used by zero.nix itself to provide packages for all
<a href="https://github.com/timewave-computer/valence-protocol">valence-protocol</a>
releases and the main branch.</p>
<h1 id="-1"><a class="header" href="#-1"></a></h1>
<h2 id="installation-1"><a class="header" href="#installation-1">Installation</a></h2>
<p>To use these options, add to your flake inputs:</p>
<pre><code class="language-nix">valence-contracts.url = "github:timewave-computer/zero.nix";
</code></pre>
<p>and inside the <code>mkFlake</code>:</p>
<pre><code class="language-nix">imports = [
  inputs.valence-contracts.flakeModules.valence-contracts
];
</code></pre>
<p>Run <code>nix flake lock</code> and you're set.</p>
<h2 id="options-1"><a class="header" href="#options-1">Options</a></h2>
<h2 id="opt-perSystem.valence-contracts.builds"><a class="header" href="#opt-perSystem.valence-contracts.builds">perSystem.valence-contracts.builds</a></h2>
<p>Valence contract builds to add to packages output.</p>
<p><em>Type:</em>
attribute set of (submodule)</p>
<p><em>Default:</em>
<code>{ }</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>
<h2 id="opt-perSystem.valence-contracts.builds._name_.packages"><a class="header" href="#opt-perSystem.valence-contracts.builds._name_.packages">perSystem.valence-contracts.builds.&lt;name&gt;.packages</a></h2>
<p>Manually specified list of cargo packages to build contracts for.
When specified, <code>contracts-dir</code> option will be ignored.</p>
<p><em>Type:</em>
null or (list of string)</p>
<p><em>Default:</em>
<code>"null, which will cause all contracts found in folder specified by contracts-dir option to be built"</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>
<h2 id="opt-perSystem.valence-contracts.builds._name_.contracts-dir"><a class="header" href="#opt-perSystem.valence-contracts.builds._name_.contracts-dir">perSystem.valence-contracts.builds.&lt;name&gt;.contracts-dir</a></h2>
<p>Folder where contract packages are located.
All cargo packages within folder will be built.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>"contracts"</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>
<h2 id="opt-perSystem.valence-contracts.builds._name_.rust-version"><a class="header" href="#opt-perSystem.valence-contracts.builds._name_.rust-version">perSystem.valence-contracts.builds.&lt;name&gt;.rust-version</a></h2>
<p>Rust version to build contracts with.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>"1.81.0"</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>
<h2 id="opt-perSystem.valence-contracts.builds._name_.src"><a class="header" href="#opt-perSystem.valence-contracts.builds._name_.src">perSystem.valence-contracts.builds.&lt;name&gt;.src</a></h2>
<p>Source to build valence contracts from.
Could be a flake input or the result of <code>builtins.fetchGit</code>.</p>
<p><em>Type:</em>
absolute path</p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>
<h2 id="opt-perSystem.valence-contracts.builds._name_.version"><a class="header" href="#opt-perSystem.valence-contracts.builds._name_.version">perSystem.valence-contracts.builds.&lt;name&gt;.version</a></h2>
<p>Valence protocol version thats being built.
Only used to name resulting package.</p>
<p><em>Type:</em>
string</p>
<p><em>Default:</em>
<code>${name}</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>
<h2 id="opt-perSystem.valence-contracts.upload"><a class="header" href="#opt-perSystem.valence-contracts.upload">perSystem.valence-contracts.upload</a></h2>
<p>Whether to enable Setup all valence contracts from latest stable release to be uploaded.
.</p>
<p><em>Type:</em>
boolean</p>
<p><em>Default:</em>
<code>false</code></p>
<p><em>Example:</em>
<code>true</code></p>
<p><em>Declared by:</em></p>
<ul>
<li><a href="https://github.com/timewave-computer/zero.nix/blob/main.nix">valence-contracts.nix</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
